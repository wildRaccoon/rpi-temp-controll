# –°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—é —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∏ –¥–ª—è —Ç–≤–µ—Ä–¥–æ–ø–∞–ª–∏–≤–Ω–æ–≥–æ –∫–æ—Ç–ª–∞

–ü—Ä–æ–≥—Ä–∞–º–∞ –¥–ª—è Raspberry Pi, —è–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª—é—î —Å–∏—Å—Ç–µ–º—É –æ–ø–∞–ª–µ–Ω–Ω—è –∑ —Ç–≤–µ—Ä–¥–æ–ø–∞–ª–∏–≤–Ω–∏–º –∫–æ—Ç–ª–æ–º —Ç–∞ —Ç–µ—Ä–º–æ–∞–∫—É–º—É–ª—è—Ç–æ—Ä–æ–º. –ó—á–∏—Ç—É—î —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∏ –∑ –∫—ñ–ª—å–∫–æ—Ö –¥–∞—Ç—á–∏–∫—ñ–≤ —Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–µ—Ä—É—î —Ä–æ–∑—É–º–Ω–æ—é —Ä–æ–∑–µ—Ç–∫–æ—é (Tapo) –¥–ª—è –≤–∫–ª—é—á–µ–Ω–Ω—è —Ç–µ–ø–ª–æ–≥–æ –ø—ñ–¥–ª–æ–≥–∏ –∑ –º–µ—Ç–æ—é –±–µ–∑–ø–µ–∫–∏ —Ç–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–µ–ø–ª–∞.

## üìã –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª

- –ó—á–∏—Ç—É–≤–∞–Ω–Ω—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∏ –∑ 4 –¥–∞—Ç—á–∏–∫—ñ–≤ (3x DS18B20 + 1x MAX31855)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Ä–æ–∑–µ—Ç–∫–æ—é Tapo (—Ç–µ–ø–ª–∏–π –ø—ñ–¥–ª–æ–≥–∞)
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö —É –ª–æ–∫–∞–ª—å–Ω—É –±–∞–∑—É –¥–∞–Ω–∏—Ö SQLite
- REST API –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É
- –í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑ –≥—Ä–∞—Ñ—ñ–∫–∞–º–∏
- –¢–µ—Å—Ç–æ–≤–∏–π —Ä–µ–∂–∏–º –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏ –±–µ–∑ –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### 1. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ Python

**–ù–∞ Linux/Mac:**
```bash
# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
python3 -m venv venv

# –ê–∫—Ç–∏–≤–∞—Ü—ñ—è –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
source venv/bin/activate

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
pip install --upgrade pip
pip install -r requirements.txt
```

**–ù–∞ Windows:**
```bash
# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
python -m venv venv

# –ê–∫—Ç–∏–≤–∞—Ü—ñ—è –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
venv\Scripts\activate

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
python -m pip install --upgrade pip
pip install -r requirements.txt
```

### 2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó

–°–∫–æ–ø—ñ—é–π—Ç–µ –ø—Ä–∏–∫–ª–∞–¥ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–π—Ç–µ –ø—ñ–¥ —Å–≤–æ—î –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è:

```bash
cp config.example.yaml config.yaml
# –í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ config.yaml –∑—ñ —Å–≤–æ—ó–º–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏
```

### 3. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–∏

**–¢–µ—Å—Ç–æ–≤–∏–π —Ä–µ–∂–∏–º (–±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è):**
```bash
python main.py --test-mode --scenario normal
```

**Production —Ä–µ–∂–∏–º:**
```bash
python main.py
```

**–Ø–∫ systemd —Å–µ—Ä–≤—ñ—Å:**
```bash
sudo cp tapo-temperature.service /etc/systemd/system/
sudo systemctl enable tapo-temperature.service
sudo systemctl start tapo-temperature.service
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
tapo/
‚îú‚îÄ‚îÄ main.py                 # –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª –ø—Ä–æ–≥—Ä–∞–º–∏
‚îú‚îÄ‚îÄ config.yaml            # –§–∞–π–ª –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
‚îú‚îÄ‚îÄ requirements.txt       # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ Python
‚îú‚îÄ‚îÄ sensors/               # –ú–æ–¥—É–ª—ñ –¥–∞—Ç—á–∏–∫—ñ–≤
‚îú‚îÄ‚îÄ controllers/           # –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ (Tapo, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞)
‚îú‚îÄ‚îÄ database/              # –†–æ–±–æ—Ç–∞ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö
‚îú‚îÄ‚îÄ api/                   # REST API —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ web/                   # –í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å (HTML, CSS, JS)
‚îú‚îÄ‚îÄ tests/                 # –¢–µ—Å—Ç–æ–≤—ñ –º–æ–¥—É–ª—ñ
‚îú‚îÄ‚îÄ utils/                 # –£—Ç–∏–ª—ñ—Ç–∏
‚îú‚îÄ‚îÄ logs/                  # –õ–æ–≥–∏
‚îî‚îÄ‚îÄ data/                  # –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö
```

## üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Raspberry Pi

1. –£–≤—ñ–º–∫–Ω—ñ—Ç—å 1-Wire —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è DS18B20:
   ```bash
   sudo raspi-config
   # Interface Options ‚Üí 1-Wire ‚Üí Enable
   ```

2. –£–≤—ñ–º–∫–Ω—ñ—Ç—å SPI –¥–ª—è MAX31855:
   ```bash
   sudo raspi-config
   # Interface Options ‚Üí SPI ‚Üí Enable
   ```

3. –î–æ–¥–∞–π—Ç–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¥–æ –≥—Ä—É–ø:
   ```bash
   sudo usermod -a -G gpio,spi $USER
   ```

4. –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ Raspberry Pi:
   ```bash
   sudo reboot
   ```

## üåê –í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É –ø—Ä–æ–≥—Ä–∞–º–∏ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑–∞ –∞–¥—Ä–µ—Å–æ—é:

- **–°—Ç–∞—Ç—É—Å**: `http://raspberry-pi-ip:8080/status.html`
- **–ì—Ä–∞—Ñ—ñ–∫–∏**: `http://raspberry-pi-ip:8080/charts.html`
- **API**: `http://raspberry-pi-ip:8080/api/status`

## üß™ –¢–µ—Å—Ç–æ–≤–∏–π —Ä–µ–∂–∏–º

–î–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è:

```bash
# –ù–æ—Ä–º–∞–ª—å–Ω–∞ —Ä–æ–±–æ—Ç–∞
python main.py --test-mode --scenario normal

# –ö—Ä–∏—Ç–∏—á–Ω—ñ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∏
python main.py --test-mode --scenario critical

# –ó–∞—Ç—É—Ö–∞–Ω–Ω—è
python main.py --test-mode --scenario cooling

# –ü–æ—á–∞—Ç–∫–æ–≤–∏–π —Å—Ç–∞–Ω
python main.py --test-mode --scenario startup
```

## üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

–î–µ—Ç–∞–ª—å–Ω–∏–π –ø–ª–∞–Ω –ø—Ä–æ–µ–∫—Ç—É –¥–∏–≤—ñ—Ç—å—Å—è –≤ —Ñ–∞–π–ª—ñ [PLAN.md](PLAN.md)

## ‚öôÔ∏è –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

–û—Å–Ω–æ–≤–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –≤ `config.yaml`:

- `sensors` - –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–∞—Ç—á–∏–∫—ñ–≤
- `tapo` - –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ä–æ–∑–µ—Ç–∫–∏ Tapo
- `control` - –ø–æ—Ä–æ–≥–æ–≤—ñ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∏ —Ç–∞ –ª–æ–≥—ñ–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª—é
- `database` - –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
- `api` - –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
- `test_mode` - –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º—É

## üõ†Ô∏è –†–æ–∑—Ä–æ–±–∫–∞

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ (–¥–∏–≤. –≤–∏—â–µ)
2. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ: `pip install -r requirements.txt`
3. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –≤ —Ç–µ—Å—Ç–æ–≤–æ–º—É —Ä–µ–∂–∏–º—ñ: `python main.py --test-mode`
4. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å: `http://localhost:8080/status.html`

## üìÑ –õ—ñ—Ü–µ–Ω–∑—ñ—è

[–í–∫–∞–∂—ñ—Ç—å –ª—ñ—Ü–µ–Ω–∑—ñ—é]

## üë§ –ê–≤—Ç–æ—Ä

[–í–∞—à–µ —ñ–º'—è]

